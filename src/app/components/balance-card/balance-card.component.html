<div class="balance-container">
  <div class="account-selector">
    <button class="account-btn" [class.active]="selectedAccount() === 'sabadell'" (click)="setAccount('sabadell')">Sabadell</button>
    <button class="account-btn" [class.active]="selectedAccount() === 'n26'" (click)="setAccount('n26')">N26</button>
  </div>
  <div class="main-balance">
    <div class="label">
      Saldo Actual
    </div>
    
    <div class="amount" [class.negative]="closingBalance() < 0">
      {{ closingBalance() | currency:'EUR' }}
    </div>
  </div>

  <div class="breakdown">
    <div class="card secondary">
      <div class="label">
        Saldo Inicial
        <button class="edit-btn" (click)="toggleEdit()" title="Editar inicial">✎</button>
      </div>
      <div *ngIf="!isEditing" class="value">{{ openingBalance() | currency:'EUR' }}</div>
      
      <div *ngIf="isEditing" class="edit-form-small">
        <input #balanceInput type="number" [value]="openingBalance()" (keyup.enter)="saveBalance(balanceInput.value)" placeholder="0.00">
        <button (click)="saveBalance(balanceInput.value)">OK</button>
        <button (click)="toggleEdit()" class="cancel-btn">✕</button>
      </div>
    </div>
    <div class="card result">
      <div class="label">Diferencia</div>
      <div class="value" [class.positive]="monthlyNet() >= 0" [class.negative]="monthlyNet() < 0">
        {{ monthlyNet() > 0 ? '+' : '' }}{{ monthlyNet() | currency:'EUR' }}
      </div>
    </div>
  </div>
</div>
