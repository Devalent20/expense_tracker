<section class="add-transaction-card" aria-labelledby="add-transaction-title">
  <h3 id="add-transaction-title">Nueva Transacción</h3>
  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
    
    <fieldset class="form-group type-fieldset">
      <legend>Tipo</legend>
      <div class="type-selector">
        <label class="type-option" [class.selected]="transactionForm.get('type')?.value === 'expense'">
          <input type="radio" formControlName="type" value="expense">
          Gasto
        </label>
        <label class="type-option" [class.selected]="transactionForm.get('type')?.value === 'income'">
          <input type="radio" formControlName="type" value="income">
          Ingreso
        </label>
      </div>
    </fieldset>

    <div class="form-group">
      <label for="title">Título</label>
      <input id="title" type="text" formControlName="title" placeholder="Ej: Cena, Nómina...">
    </div>

    <div class="form-group">
      <label for="amount">Cantidad (€)</label>
      <div class="input-group">
        <button type="button" class="step-btn" (click)="decrement()" aria-label="Disminuir cantidad">-</button>
        <input id="amount" type="number" formControlName="amount" min="0" step="0.01">
        <button type="button" class="step-btn" (click)="increment()" aria-label="Aumentar cantidad">+</button>
      </div>
    </div>

    <div class="form-group">
      <label for="category">Categoría</label>
      <select id="category" formControlName="category">
        <option *ngFor="let cat of currentCategories" [value]="cat">{{ icons[cat] }} {{ cat }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="date">Fecha</label>
      <input id="date" type="date" formControlName="date">
    </div>

    <div class="form-group">
      <label for="comment">Notas / Comentarios (opcional)</label>
      <input id="comment" type="text" formControlName="comment" placeholder="Ej: Regalo Irene, supermercado semanal...">
    </div>

    <div class="form-group checkbox-group">
      <label class="checkbox-label">
        <input type="checkbox" formControlName="isRecurring">
        <span>Repetir cada mes (Suscripción/Fijo)</span>
      </label>
    </div>

    <button type="submit" [disabled]="transactionForm.invalid">Añadir</button>
  </form>
</section>
